<dom-module id="malavv-site">
  <style>
    :host {
      @apply(--layout-horizontal);
      font-family: 'RobotoDraft', sans-serif;
    }

    :host #cards {
      /*@apply(--layout-horizontal);
      @apply(--layout-flex);
      @apply(--layout-wrap);*/ 
      @apply(--layout-flex);
      
      background-color: #fafafa;
      overflow-y: scroll;
      position: relative;
      padding: 10px;
    }
    :host #cards malavv-card {
      /*margin-bottom: 10px;
      margin-right: 10px;*/
    };

    :host paper-material {
      z-index: 1;
      @apply(--layout-vertical);
    }

    :host malavv-infobar {
      @apply(--shadow-elevation-2dp);
      width: 310px;
      min-width: 310px; 
      z-index: 1;
    }
  </style>

  <template>
    <!-- Data for the website -->
    <iron-ajax auto 
      url="[[dataUrl]]"
      handle-as="json"
      last-response="{{data}}"></iron-ajax>

    <!-- Left Infobar -->
    <malavv-infobar img="[[infobarImg]]"></malavv-infobar>

    <!-- Grid of cards -->
    <malavv-cards id="cards" cards="[[data.cards]]"></malavv-cards>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'malavv-site',
      
      behaviors: [
        Polymer.NeonAnimatableBehavior,
        Polymer.NeonAnimationRunnerBehavior
      ],

      properties: {
        data: {
          type: Object,
          notify: true
        },
        dataUrl: {
          type: String,
          value: window.config.data.url
        },
        infobarImg: {
          type: String,
          value: window.config.me.mainImg
        },


        animationConfig: {
          type: Object,
          value: function() {
            return {
              'entry': [{
                animatable: this.$.cards,
                type: 'entry'
              }]
            };
          }
        }
      },
      show: function() {
        this.playAnimation('entry');
      }
    });

  })()
  </script>

</dom-module>